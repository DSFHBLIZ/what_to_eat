(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[316],{9502:function(e,s,a){Promise.resolve().then(a.bind(a,9606))},9606:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(984),i=a(8397),r=a.n(i),l=a(208),n=a(6665),c=a(4601),b=a(4477),d=a(5262),x=a(5068),o=a(4405),f=a(2330),m=a(979),p=a(8438),j=a(342);function g(e){var s,a;let{params:i}=e,g=(0,n.useRouter)(),[h,u]=(0,l.useState)(null),[y,N]=(0,l.useState)(!0),[v,w]=(0,l.useState)(null),[k,S]=(0,l.useState)(!1),[R,P]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){N(!0);try{let e=await (0,j.ZY)(i.id);if(e)u(e);else{let e=(0,p.wb)(i.id);e?u(e):w("菜谱不存在")}S((0,p.Dq)(i.id))}catch(e){w("加载菜谱失败"),console.error(e)}finally{N(!1)}}()},[i.id]);let z=async()=>{if(navigator.share)try{await navigator.share({title:(null==h?void 0:h.name)||"好吃的菜谱",text:"查看这个好吃的菜谱：".concat(null==h?void 0:h.name),url:window.location.href})}catch(e){console.error("分享失败:",e)}};if(y)return(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6 mb-6"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-6"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"})]})});if(v||!h)return(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-4 sm:p-6",children:(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,t.jsx)("p",{className:"text-red-700",children:v||"菜谱不存在"}),(0,t.jsxs)("button",{onClick:()=>g.back(),className:"mt-2 text-red-600 hover:text-red-800 flex items-center",children:[(0,t.jsx)(c.Z,{size:16,className:"mr-1"}),"返回"]})]})});let C={...h,ingredients:(0,p.if)(h.ingredients),seasonings:(0,p.if)(h.seasonings),preparationSteps:(0,p.if)(h.preparationSteps||(null===(s=h.步骤)||void 0===s?void 0:s.准备步骤)),cookingSteps:(0,p.if)(h.cookingSteps||h.steps||(null===(a=h.步骤)||void 0===a?void 0:a.烹饪步骤)),tips:(0,p.if)(h.tips||h.cookingTips||h.注意事项),cookingTime:h.cookingTime||"未知",difficulty:h.difficulty||"中等"};try{window.debugRecipe=C,console.log("渲染菜谱详情:",C)}catch(e){}return(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e max-w-3xl mx-auto p-4 sm:p-6 print:p-0",children:[(0,t.jsxs)("button",{onClick:()=>g.back(),className:"jsx-5e2be5b22f5f446e mb-4 text-gray-600 hover:text-gray-800 flex items-center print:hidden",children:[(0,t.jsx)(c.Z,{size:16,className:"mr-1"}),"返回"]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex justify-between items-start mb-4",children:[(0,t.jsx)("h1",{className:"jsx-5e2be5b22f5f446e text-2xl sm:text-3xl font-bold text-gray-800",children:h.name}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex space-x-2 print:hidden",children:[(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e relative",children:[(0,t.jsx)("button",{onClick:()=>{P(!R)},"aria-label":"分享",title:"分享菜谱",className:"jsx-5e2be5b22f5f446e p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(b.Z,{size:20})}),R&&(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 overflow-hidden border border-gray-200",children:["undefined"!=typeof navigator&&"share"in navigator&&(0,t.jsxs)("button",{onClick:z,className:"jsx-5e2be5b22f5f446e w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(b.Z,{size:16,className:"mr-2"}),"使用系统分享"]}),(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href).then(()=>{alert("链接已复制到剪贴板"),P(!1)}).catch(e=>{console.error("复制链接失败:",e)})},className:"jsx-5e2be5b22f5f446e w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(d.Z,{size:16,className:"mr-2"}),"复制链接"]})]})]}),(0,t.jsx)("button",{onClick:()=>{let e=document.title;document.title=(null==h?void 0:h.name)?"".concat(h.name," - 简食搜索"):"菜谱打印 - 简食搜索",window.print(),setTimeout(()=>{document.title=e},100)},"aria-label":"打印",title:"打印菜谱",className:"jsx-5e2be5b22f5f446e p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-full",children:(0,t.jsx)(x.Z,{size:20})}),(0,t.jsx)("button",{onClick:()=>{S((0,p.mN)(i.id))},"aria-label":k?"移除收藏":"添加收藏",title:k?"移除收藏":"添加收藏",className:"jsx-5e2be5b22f5f446e "+"p-2 hover:bg-gray-100 rounded-full ".concat(k?"text-red-500":"text-gray-600 hover:text-gray-800"),children:(0,t.jsx)(o.Z,{size:20,fill:k?"currentColor":"none"})})]})]}),(0,t.jsx)("p",{className:"jsx-5e2be5b22f5f446e text-gray-600 mb-6",children:h.description}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex flex-wrap gap-4 mb-6",children:[h.difficulty&&(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex items-center",children:[(0,t.jsx)(f.Z,{size:18,className:"mr-1 text-gray-500"}),(0,t.jsxs)("span",{className:"jsx-5e2be5b22f5f446e text-sm text-gray-700",children:["难度: ",h.difficulty]})]}),h.cookingTime&&(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex items-center",children:[(0,t.jsx)(m.Z,{size:18,className:"mr-1 text-gray-500"}),(0,t.jsxs)("span",{className:"jsx-5e2be5b22f5f446e text-sm text-gray-700",children:["烹饪时间: ",h.cookingTime]})]})]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex flex-wrap gap-2 mb-6",children:[h.cuisine&&(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:h.cuisine}),(0,p.if)(h.flavors,"RecipePage","flavors").map((e,s)=>(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:e},"flavor-".concat(s))),(0,p.if)(h.cookingMethod,"RecipePage","cookingMethod").map((e,s)=>(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full",children:e},"method-".concat(s))),(0,p.if)(h.dietaryRestrictions,"RecipePage","dietaryRestrictions").map((e,s)=>(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:e},"diet-".concat(s)))]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e",children:[(0,t.jsx)("h2",{className:"jsx-5e2be5b22f5f446e text-xl font-bold mb-3 pb-2 border-b text-gray-800",children:"调料"}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e space-y-2",children:[(0,p.if)(h.seasonings,"RecipePage","seasonings").map((e,s)=>(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex items-center py-1",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e mr-2 w-1 h-1 bg-yellow-500 rounded-full"}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e",children:"string"==typeof e?e:"object"==typeof e&&null!==e?(e.名称||e.name)+(e.用量||e.amount?": ".concat(e.用量||e.amount):""):String(e)})]},s)),0===(0,p.if)(h.seasonings,"RecipePage","seasonings").length&&(0,t.jsx)("div",{className:"jsx-5e2be5b22f5f446e text-gray-500 text-sm italic",children:"无特定调料要求"})]})]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e",children:[(0,t.jsx)("h2",{className:"jsx-5e2be5b22f5f446e text-xl font-bold mb-3 pb-2 border-b text-gray-800",children:"食材"}),(0,t.jsx)("div",{className:"jsx-5e2be5b22f5f446e space-y-2",children:(0,p.if)(h.ingredients,"RecipePage","ingredients").map((e,s)=>(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex items-center py-1",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e mr-2 w-1 h-1 bg-amber-500 rounded-full"}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e",children:"string"==typeof e?e:"object"==typeof e&&null!==e?(e.名称||e.name)+(e.用量||e.amount?": ".concat(e.用量||e.amount):""):String(e)})]},s))})]})]}),(0,p.if)(h.preparationSteps,"RecipePage","preparationSteps").length>0&&(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e mb-8 print:mb-4 bg-gray-50 p-4 rounded-lg border border-gray-100",children:[(0,t.jsxs)("h2",{className:"jsx-5e2be5b22f5f446e text-xl font-semibold mb-4 flex items-center text-gray-800 print:text-lg print:mb-2",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e mr-2",children:"\uD83D\uDCDD"}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e",children:"准备工作"})]}),(0,t.jsx)("ol",{className:"jsx-5e2be5b22f5f446e space-y-3 list-none",children:(0,p.if)(h.preparationSteps,"RecipePage","preparationSteps").map((e,s)=>(0,t.jsxs)("li",{className:"jsx-5e2be5b22f5f446e flex",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e flex-shrink-0 w-6 h-6 bg-white text-gray-700 rounded-full flex items-center justify-center mr-3 border border-gray-200 print:bg-gray-100",children:s+1}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e text-gray-700",children:e})]},s))})]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e mb-8",children:[(0,t.jsx)("h2",{className:"jsx-5e2be5b22f5f446e text-xl font-bold mb-4 pb-2 border-b text-gray-800",children:"烹饪步骤"}),(0,t.jsx)("ol",{className:"jsx-5e2be5b22f5f446e space-y-4",children:(0,p.if)(h.cookingSteps,"RecipePage","cookingSteps").length>0?(0,p.if)(h.cookingSteps,"RecipePage","cookingSteps").map((e,s)=>(0,t.jsx)("li",{className:"jsx-5e2be5b22f5f446e pb-3 border-b border-gray-100 last:border-0",children:(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e flex-shrink-0 w-7 h-7 bg-sky-100 text-sky-700 rounded-full flex items-center justify-center mr-3 font-medium",children:s+1}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e text-gray-700 pt-1",children:e})]})},s)):(0,p.if)(h.steps,"RecipePage","steps").length>0?(0,p.if)(h.steps,"RecipePage","steps").map((e,s)=>(0,t.jsx)("li",{className:"jsx-5e2be5b22f5f446e pb-3 border-b border-gray-100 last:border-0",children:(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e flex",children:[(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e flex-shrink-0 w-7 h-7 bg-sky-100 text-sky-700 rounded-full flex items-center justify-center mr-3 font-medium",children:s+1}),(0,t.jsx)("span",{className:"jsx-5e2be5b22f5f446e text-gray-700 pt-1",children:e})]})},s)):(0,t.jsx)("li",{className:"jsx-5e2be5b22f5f446e text-gray-500",children:"暂无烹饪步骤"})})]}),("object"==typeof h.tips&&null!==h.tips&&(0,p.if)(h.tips,"RecipePage","tips").length>0||"string"==typeof h.tips&&h.tips.trim())&&(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e mb-8",children:[(0,t.jsx)("h2",{className:"jsx-5e2be5b22f5f446e text-xl font-bold mb-3 pb-2 border-b text-gray-800",children:"烹饪小贴士"}),(0,t.jsx)("div",{className:"jsx-5e2be5b22f5f446e bg-amber-50 border border-amber-200 rounded-lg p-4",children:"object"==typeof h.tips?(0,t.jsx)("ul",{className:"jsx-5e2be5b22f5f446e list-disc pl-5 space-y-2",children:(0,p.if)(h.tips,"RecipePage","tips").map((e,s)=>(0,t.jsx)("li",{className:"jsx-5e2be5b22f5f446e text-gray-700",children:e},s))}):(0,t.jsx)("p",{className:"jsx-5e2be5b22f5f446e text-gray-700",children:h.tips})})]}),(0,t.jsxs)("div",{className:"jsx-5e2be5b22f5f446e hidden print:block mt-8 pt-4 border-t text-gray-500 text-sm",children:[(0,t.jsx)("p",{className:"jsx-5e2be5b22f5f446e",children:"打印自简食搜索 (https://whattoeat.domain.com)"}),(0,t.jsxs)("p",{className:"jsx-5e2be5b22f5f446e",children:["打印日期: ",new Date().toLocaleDateString()]})]}),(0,t.jsx)(r(),{id:"5e2be5b22f5f446e",children:"@media print{body{font-size:12pt;color:black;background:white}h1{font-size:18pt;margin-bottom:10pt}h2{font-size:14pt;margin-top:14pt;margin-bottom:8pt}.print\\\\:hidden{display:none!important}.print\\\\:block{display:block!important}.print\\\\:p-0{padding:0!important}.print\\\\:mb-4{margin-bottom:1rem!important}.grid{display:block!important}a{text-decoration:none!important;color:inherit!important}div,h2,h3,ul,ol,li{page-break-inside:avoid}}"})]})}}},function(e){e.O(0,[410,814,342,438,115,69,744],function(){return e(e.s=9502)}),_N_E=e.O()}]);