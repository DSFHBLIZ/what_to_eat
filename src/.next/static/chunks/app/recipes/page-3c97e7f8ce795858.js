(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{4936:function(e,t,s){Promise.resolve().then(s.bind(s,4775))},979:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(998).Z)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4775:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var i=s(984),l=s(208),r=s(6665),n=s(3391),a=s(7781),c=s(1111),d=s(4030),o=s(2137),u=s(998);let x=(0,u.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),g=(0,u.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function m(e){let{onFilterChange:t,className:s="",onTagSelect:r,autoExecuteSearch:n=!1}=e,[a,c]=(0,l.useState)(null),[d,u]=(0,l.useState)([]),[m,h]=(0,l.useState)(null),[f,p]=(0,l.useState)([]),[y,b]=(0,l.useState)([]),[j,v]=(0,l.useState)([]),[N,k]=(0,l.useState)([]),[w,S]=(0,l.useState)([]),[E,C]=(0,l.useState)([]),[M,I]=(0,l.useState)(!0),[R,q]=(0,l.useState)(null);(0,l.useEffect)(()=>{v([]),k([]),v(["中餐-家常菜","中餐-小吃","中餐-其它"]),k(["酸","咸","苦","辣","鲜","甜"]),C(["清真","纯素","无麸质"])},[]),(0,l.useEffect)(()=>{let e=e=>{if(e.detail&&e.detail.tag){let s=e.detail.tag;a===s&&c(null),m===s&&h(null),d.includes(s)&&u(e=>e.filter(e=>e!==s)),f.includes(s)&&p(e=>e.filter(e=>e!==s)),y.includes(s)&&b(e=>e.filter(e=>e!==s)),n&&t({cuisine:a===s?null:a,flavors:d.filter(e=>e!==s),difficulty:m===s?null:m,cookingMethods:f.filter(e=>e!==s),dietaryRestrictions:y.filter(e=>e!==s)})}};return document.addEventListener("filter-tag-removed",e),()=>{document.removeEventListener("filter-tag-removed",e)}},[a,d,m,f,y,t,n]),(0,l.useEffect)(()=>{n&&t({cuisine:a,flavors:d,difficulty:m,cookingMethods:f,dietaryRestrictions:y})},[a,d,m,f,y,t,n]);let z=e=>{u(t=>{let s=t.includes(e),i=s?t.filter(t=>t!==e):[...t,e];return r&&!s&&r(e),i})},A=e=>{b(t=>{let s=t.includes(e),i=s?t.filter(t=>t!==e):[...t,e];return r&&!s&&r(e),i})},L=e=>{let t=a===e?null:e;c(t),r&&t&&r(t)},T=e=>{let t=m===e?null:e;h(t),r&&t&&r(t)},Z=null!==a||d.length>0||null!==m||f.length>0||y.length>0,P=e=>{q(R===e?null:e)},D=()=>{t({cuisine:a,flavors:d,difficulty:m,cookingMethods:f,dietaryRestrictions:y}),I(!0)};return(0,l.useEffect)(()=>{let e=()=>{console.log("FilterPanel: 收到重置所有筛选器事件"),c(null),u([]),h(null),p([]),b([]),r&&r(""),t&&t({cuisine:null,flavors:[],difficulty:null,cookingMethods:[],dietaryRestrictions:[]})};return document.addEventListener("reset-all-filters",e),()=>{document.removeEventListener("reset-all-filters",e)}},[r,t]),(0,i.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm ".concat(s),children:[(0,i.jsxs)("div",{className:"md:hidden flex items-center justify-between p-3 cursor-pointer",onClick:()=>I(!M),children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Z,{size:18}),(0,i.jsx)("span",{className:"font-medium",children:"筛选条件"}),Z&&(0,i.jsx)("span",{className:"bg-amber-500 text-white text-xs px-2 py-0.5 rounded-full",children:a?1:0+d.length+(m?1:0)+f.length+y.length})]}),M?(0,i.jsx)(x,{size:18}):(0,i.jsx)(g,{size:18})]}),(0,i.jsxs)("div",{className:"".concat(M?"hidden":"block"," md:block p-4"),children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center justify-between cursor-pointer",onClick:()=>P("cuisine"),children:[(0,i.jsx)("span",{children:"菜系"}),"cuisine"===R?(0,i.jsx)(g,{size:16}):(0,i.jsx)(x,{size:16})]}),(0,i.jsx)("div",{className:"".concat("cuisine"===R||null===R?"block":"hidden md:block"," flex flex-wrap gap-2"),children:j.map(e=>(0,i.jsx)("button",{onClick:()=>L(e),className:"px-3 py-1.5 text-sm rounded-full transition-colors filter-option-button ".concat(a===e?"bg-blue-100 text-blue-700 border-blue-200 border":"bg-gray-100 text-gray-700 border-gray-200 border hover:bg-gray-200"),type:"button","data-tag":e,"aria-pressed":a===e,children:e},e))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center justify-between cursor-pointer",onClick:()=>P("flavors"),children:[(0,i.jsx)("span",{children:"口味特点"}),"flavors"===R?(0,i.jsx)(g,{size:16}):(0,i.jsx)(x,{size:16})]}),(0,i.jsx)("div",{className:"".concat("flavors"===R||null===R?"block":"hidden md:block"," flex flex-wrap gap-2"),children:N.map(e=>(0,i.jsx)("button",{onClick:()=>z(e),className:"px-3 py-1.5 text-sm rounded-full transition-colors filter-option-button ".concat(d.includes(e)?"bg-blue-100 text-blue-700 border-blue-200 border":"bg-gray-100 text-gray-700 border-gray-200 border hover:bg-gray-200"),type:"button","data-tag":e,"data-filter-type":"flavor","data-filter-value":e,"data-filter-active":d.includes(e).toString(),"aria-pressed":d.includes(e),children:e},e))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center justify-between cursor-pointer",onClick:()=>P("difficulty"),children:[(0,i.jsx)("span",{children:"烹饪难度"}),"difficulty"===R?(0,i.jsx)(g,{size:16}):(0,i.jsx)(x,{size:16})]}),(0,i.jsx)("div",{className:"".concat("difficulty"===R||null===R?"block":"hidden md:block"," flex flex-wrap gap-2"),children:["新手","简单","中等","高级","大师级"].map(e=>(0,i.jsx)("button",{onClick:()=>T(e),className:"px-3 py-1.5 text-sm rounded-full transition-colors filter-option-button ".concat(m===e?"bg-blue-100 text-blue-700 border-blue-200 border":"bg-gray-100 text-gray-700 border-gray-200 border hover:bg-gray-200"),type:"button","data-tag":e,"data-filter-type":"difficulty","data-filter-value":e,"data-filter-active":(m===e).toString(),"aria-pressed":m===e,children:e},e))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center justify-between cursor-pointer",onClick:()=>P("dietary"),children:[(0,i.jsx)("span",{children:"饮食限制"}),"dietary"===R?(0,i.jsx)(g,{size:16}):(0,i.jsx)(x,{size:16})]}),(0,i.jsx)("div",{className:"".concat("dietary"===R||null===R?"block":"hidden md:block"," flex flex-wrap gap-2"),children:E.map(e=>(0,i.jsx)("button",{onClick:()=>A(e),className:"px-3 py-1.5 text-sm rounded-full transition-colors filter-option-button ".concat(y.includes(e)?"bg-blue-100 text-blue-700 border-blue-200 border":"bg-gray-100 text-gray-700 border-gray-200 border hover:bg-gray-200"),type:"button","data-tag":e,"data-filter-type":"dietaryRestriction","data-filter-value":e,"data-filter-active":y.includes(e).toString(),"aria-pressed":y.includes(e),children:e},e))})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium mb-2 flex items-center justify-between cursor-pointer",onClick:()=>P("cookingTime"),children:[(0,i.jsx)("span",{children:"烹饪时间"}),"cookingTime"===R?(0,i.jsx)(g,{size:16}):(0,i.jsx)(x,{size:16})]}),(0,i.jsx)("div",{className:"".concat("cookingTime"===R||null===R?"block":"hidden md:block"," flex flex-wrap gap-2"),children:["10分钟内","30分钟内","1小时内"].map(e=>(0,i.jsx)("button",{onClick:()=>r&&r(e),className:"px-3 py-1.5 text-sm rounded-full transition-colors bg-gray-100 text-gray-700 border-gray-200 border hover:bg-gray-200 filter-option-button",type:"button","data-tag":e,"data-filter-type":"cookingTime","data-filter-value":e,"data-filter-active":"false",children:e},e))})]}),(0,i.jsxs)("div",{className:"flex justify-between pt-3 border-t border-gray-200",children:[(0,i.jsx)("button",{onClick:()=>{c(null),u([]),h(null),p([]),b([]),D()},className:"px-4 py-2 text-gray-600 text-sm rounded-md hover:bg-gray-100",children:"清除筛选"}),(0,i.jsx)("button",{onClick:D,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-md hover:bg-blue-600",children:"应用筛选"})]})]}),M&&Z&&(0,i.jsx)("div",{className:"md:hidden p-3 border-t border-gray-200 text-sm text-gray-600",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a&&(0,i.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded-full text-xs",children:a}),d.map(e=>(0,i.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded-full text-xs",children:e},e)),m&&(0,i.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded-full text-xs",children:m}),y.map(e=>(0,i.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded-full text-xs",children:e},e))]})})]})}function h(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)(),s=(null==t?void 0:t.get("query"))||"",[o,u]=(0,l.useState)([]),[x,g]=(0,l.useState)(s),[h,f]=(0,l.useState)(!1),[p,y]=(0,l.useState)(0),[b,j]=(0,l.useState)(1),[v,N]=(0,l.useState)(null),[k,w]=(0,l.useState)({cuisine:null,flavors:[],difficulty:null,cookingMethods:[],dietaryRestrictions:[],ingredients:[],requiredIngredients:[],optionalIngredients:[]});(0,l.useEffect)(()=>{if(!t)return;let e=t.get("cuisine"),s=t.get("difficulty"),i=t.getAll("flavors"),l=t.getAll("cookingMethods"),r=t.getAll("dietaryRestrictions"),n=t.getAll("ingredients"),a=t.getAll("requiredIngredients"),c=t.getAll("optionalIngredients"),d=t.get("query")||"";w({cuisine:e||null,difficulty:s||null,flavors:i||[],cookingMethods:l||[],dietaryRestrictions:r||[],ingredients:n||[],requiredIngredients:a||[],optionalIngredients:c||[]}),g(d),I()},[t]);let S=Math.ceil(p>0?p:1),E=(0,l.useCallback)(t=>{g(t),j(1);let s=new URLSearchParams;t&&s.set("query",t),k.cuisine&&s.set("cuisine",k.cuisine),k.flavors.forEach(e=>{s.append("flavors",e)}),k.difficulty&&s.set("difficulty",k.difficulty),k.cookingMethods.forEach(e=>{s.append("cookingMethods",e)}),k.dietaryRestrictions.forEach(e=>{s.append("dietaryRestrictions",e)}),k.ingredients.forEach(e=>{s.append("ingredients",e)}),s.set("page","1"),e.push("/recipes?".concat(s.toString()))},[e,k]),C=(0,l.useCallback)(e=>{w(t=>{let s={...t};return void 0!==e.cuisine&&(s.cuisine=e.cuisine),e.flavors&&e.flavors.forEach(e=>{s.flavors.includes(e)||s.flavors.push(e)}),void 0!==e.difficulty&&(s.difficulty=e.difficulty),e.cookingMethods&&e.cookingMethods.forEach(e=>{s.cookingMethods.includes(e)||s.cookingMethods.push(e)}),e.dietaryRestrictions&&e.dietaryRestrictions.forEach(e=>{s.dietaryRestrictions.includes(e)||s.dietaryRestrictions.push(e)}),s}),j(1)},[]),M=s=>{j(s);let i=new URLSearchParams(null==t?void 0:t.toString());i.set("page",s.toString()),e.push("/recipes?".concat(i.toString()))},I=async()=>{if(t){f(!0),N(null);try{let e=parseInt(t.get("page")||"1",10);j(e);let s=t.get("cuisine"),i=t.getAll("flavors"),l=t.get("difficulty"),r=t.getAll("cookingMethods"),n=t.getAll("dietaryRestrictions"),a=t.getAll("ingredients"),c=t.getAll("requiredIngredients"),d=t.getAll("optionalIngredients"),o=t.get("query")||x||"",g="/api/recipes/search?",m=new URLSearchParams;o&&m.set("query",o),s&&m.set("cuisine",s),i.forEach(e=>{m.append("flavors",e)}),l&&m.set("difficulty",l),r.forEach(e=>{m.append("cookingMethods",e)}),n.forEach(e=>{m.append("dietaryRestrictions",e)}),a.forEach(e=>{m.append("ingredients",e)}),c.forEach(e=>{m.append("requiredIngredients",e)}),d.forEach(e=>{m.append("optionalIngredients",e)}),m.set("page",e.toString()),m.set("pageSize","12"),g+=m.toString();let h=await fetch(g);if(!h.ok)throw Error("搜索失败: ".concat(h.status," ").concat(h.statusText));let f=await h.json();if(f.success)u(f.results||[]),y(f.total||0);else throw Error(f.error||"搜索失败")}catch(e){console.error("搜索错误:",e),N(e instanceof Error?e.message:String(e)),u([]),y(0)}finally{f(!1)}}},R=(0,l.useCallback)(()=>{let t=new URLSearchParams;x&&t.set("query",x),k.cuisine&&t.set("cuisine",k.cuisine),k.flavors.forEach(e=>{t.append("flavors",e)}),k.difficulty&&t.set("difficulty",k.difficulty),k.cookingMethods.forEach(e=>{t.append("cookingMethods",e)}),k.dietaryRestrictions.forEach(e=>{t.append("dietaryRestrictions",e)}),k.ingredients.forEach(e=>{t.append("ingredients",e)}),k.requiredIngredients.forEach(e=>{t.append("requiredIngredients",e)}),k.optionalIngredients.forEach(e=>{t.append("optionalIngredients",e)}),t.set("page","1"),e.push("/recipes?".concat(t.toString()))},[e,x,k]),q=(0,l.useCallback)(()=>{w({cuisine:null,flavors:[],difficulty:null,cookingMethods:[],dietaryRestrictions:[],ingredients:[],requiredIngredients:[],optionalIngredients:[]}),g(""),j(1);let t=new URLSearchParams;t.set("page","1");{let e=new CustomEvent("reset-all-filters");document.dispatchEvent(e)}e.push("/recipes?".concat(t.toString()))},[e]);return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,i.jsx)(c.default,{className:"shadow-sm"}),(0,i.jsx)("div",{className:"pt-20 pb-6 bg-white border-b",children:(0,i.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"食谱搜索"}),(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:(0,i.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsx)(n.default,{placeholder:"请输入食材或菜名...",initialValue:x,onSearch:E,onIngredientSearch:(e,t)=>{w(s=>({...s,requiredIngredients:e||[],optionalIngredients:t||[]})),setTimeout(()=>R(),100)},className:"w-full"})}),(0,i.jsxs)("div",{className:"flex-shrink-0 flex items-end",children:[(0,i.jsxs)("button",{onClick:q,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2 transition-colors flex items-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mr-1",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),"重置"]}),(0,i.jsx)("button",{onClick:R,className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-md transition-colors",children:"应用筛选"})]})]})})})]})}),(0,i.jsx)("main",{className:"flex-grow py-6",children:(0,i.jsx)("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,i.jsx)("div",{className:"w-full md:hidden",children:(0,i.jsx)(m,{onFilterChange:C,onTagSelect:e=>{if(!e){g("");return}g(t=>t?"".concat(t," ").concat(e):e)},autoExecuteSearch:!1})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,i.jsx)("div",{className:"hidden md:block md:col-span-1",children:(0,i.jsx)(m,{onFilterChange:C,className:"sticky top-24",onTagSelect:e=>{if(!e){g("");return}g(t=>t?"".concat(t," ").concat(e):e)},autoExecuteSearch:!1})}),(0,i.jsx)("div",{className:"md:col-span-3",children:v?(0,i.jsxs)("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"text-red-500 mb-4",children:"⚠️"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"搜索出错"}),(0,i.jsx)("p",{className:"text-gray-500",children:v})]}):h?(0,i.jsxs)("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-t-4 border-sky-500 border-solid rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-500",children:"正在搜索，请稍候..."})]}):o.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex flex-wrap justify-between items-center mb-4",children:(0,i.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["找到 ",p," 个食谱"]})}),(0,i.jsx)("div",{className:"flex flex-col gap-4",children:o.map(e=>(0,i.jsx)(a.Z,{recipe:e,className:"w-full"},e.id))}),S>1&&(0,i.jsxs)("div",{className:"mt-8 flex justify-center items-center space-x-2",children:[(0,i.jsx)("button",{onClick:()=>M(1),disabled:1===b,className:"w-8 h-8 rounded-md flex items-center justify-center ".concat(1===b?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"1"}),(0,i.jsx)("button",{onClick:()=>M(b-1),disabled:1===b,className:"w-8 h-8 rounded-md flex items-center justify-center ".concat(1===b?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"<"}),(0,i.jsxs)("span",{className:"px-2",children:[b," / ",S]}),(0,i.jsx)("button",{onClick:()=>M(b+1),disabled:b===S,className:"w-8 h-8 rounded-md flex items-center justify-center ".concat(b===S?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:">"}),(0,i.jsx)("button",{onClick:()=>M(S),disabled:b===S,className:"w-8 h-8 rounded-md flex items-center justify-center ".concat(b===S?"bg-gray-100 text-gray-400":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:S})]})]}):(0,i.jsxs)("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm",children:[(0,i.jsx)("div",{className:"text-gray-400 mb-4",children:"\uD83D\uDD0D"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"未找到匹配的食谱"}),(0,i.jsx)("p",{className:"text-gray-500",children:"请尝试使用不同的关键词或筛选条件"})]})})]})]})})}),(0,i.jsx)(d.default,{})]})}},7781:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var i=s(984),l=s(208),r=s(346),n=s(979);let a=(0,s(998).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var c=s(8438),d=e=>{var t,s,d,o,u,x;let{recipe:g,className:m="",showMatchScore:h=!1,showFavoriteButton:f=!0}=e,[p,y]=l.useState(!1);l.useEffect(()=>{y((0,c.Dq)(g.id))},[g.id]);let b=g.name||g.菜名||"未命名菜谱",j=g.cuisine||g.菜系,v=g.difficulty||g.烹饪难度,N=g.cookingTime||g.烹饪时间;return(0,i.jsx)(r.default,{href:"/recipe/".concat(g.id),className:"block ".concat(m),children:(0,i.jsxs)("div",{className:"bg-white rounded-lg overflow-hidden border border-gray-200 hover:border-blue-300 transition-all duration-300 hover:shadow-md h-full p-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("div",{className:"flex-grow pr-2",children:[(0,i.jsx)("div",{className:"mb-1.5 flex items-start",children:(0,i.jsxs)("h3",{className:"font-medium text-gray-900 leading-tight flex items-center",children:[b,p&&(0,i.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1.5 py-0.5 rounded",children:"收藏"})]})}),(0,i.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-1.5",children:[N&&(0,i.jsxs)("span",{className:"flex items-center mr-3",children:[(0,i.jsx)(n.Z,{size:12,className:"mr-1"}),"string"==typeof N?N:(e=>{if(!e)return"未知";if(e<60)return"".concat(e,"分钟");let t=e%60;return"".concat(Math.floor(e/60),"小时").concat(t>0?" ".concat(t,"分钟"):"")})(N)]}),j&&(0,i.jsx)("span",{children:j}),v&&(0,i.jsx)("span",{className:"ml-2 text-xs bg-gray-100 text-gray-700 px-1.5 py-0.5 rounded",children:v})]})]}),h&&void 0!==g.matchScore&&(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsxs)("span",{className:"text-xs text-blue-800 font-medium whitespace-nowrap",children:["匹配",Math.round(g.matchScore<1?100*g.matchScore:g.matchScore),"%"]})})]}),h&&((null===(t=g.matchedIngredients)||void 0===t?void 0:t.length)||(null===(s=g.matchedSeasonings)||void 0===s?void 0:s.length))?(0,i.jsxs)("div",{className:"mt-1.5",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 mb-0.5",children:"匹配食材/调料:"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-0.5 text-xs text-gray-800",children:[null===(d=g.matchedIngredients)||void 0===d?void 0:d.slice(0,3).map((e,t)=>{var s;return(0,i.jsxs)("span",{children:[e,t<Math.min((null===(s=g.matchedIngredients)||void 0===s?void 0:s.length)||0,3)-1?", ":""]},t)}),null===(o=g.matchedSeasonings)||void 0===o?void 0:o.slice(0,2).map((e,t)=>{var s,l;return(0,i.jsxs)("span",{children:[0===t&&(null===(s=g.matchedIngredients)||void 0===s?void 0:s.length)?", ":"",e,t<Math.min((null===(l=g.matchedSeasonings)||void 0===l?void 0:l.length)||0,2)-1?", ":""]},"s-".concat(t))}),((null===(u=g.matchedIngredients)||void 0===u?void 0:u.length)||0)+((null===(x=g.matchedSeasonings)||void 0===x?void 0:x.length)||0)>5&&(0,i.jsx)("span",{className:"text-gray-500",children:"等"})]})]}):g.ingredients&&Array.isArray(g.ingredients)?(0,i.jsxs)("div",{className:"mt-1.5",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 mb-0.5",children:"主要食材:"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-0.5 text-xs text-gray-800",children:[g.ingredients.slice(0,4).map((e,t)=>(0,i.jsxs)("span",{children:["string"==typeof e?e:e.name||e.名称||"",t<Math.min(g.ingredients.length,4)-1?", ":""]},t)),g.ingredients.length>4&&(0,i.jsx)("span",{className:"text-gray-500",children:"等"})]})]}):(0,i.jsxs)("div",{className:"mt-1.5",children:[(0,i.jsx)("div",{className:"text-xs text-gray-500 mb-0.5",children:"饮食属性:"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-0.5 text-xs text-gray-800",children:[g.isHalal&&(0,i.jsx)("span",{children:"清真"}),g.isVegan&&(0,i.jsxs)("span",{children:[g.isHalal?", ":"","纯素"]}),g.isGlutenFree&&(0,i.jsxs)("span",{children:[g.isHalal||g.isVegan?", ":"","无麸质"]}),!g.isHalal&&!g.isVegan&&!g.isGlutenFree&&(0,i.jsx)("span",{className:"text-gray-500",children:"标准餐食"})]})]}),(0,i.jsx)("div",{className:"mt-2 text-xs text-blue-600 font-medium flex justify-end",children:(0,i.jsxs)("span",{className:"flex items-center",children:["详情 ",(0,i.jsx)(a,{size:14})]})})]})})}}},function(e){e.O(0,[346,410,342,438,292,115,69,744],function(){return e(e.s=4936)}),_N_E=e.O()}]);