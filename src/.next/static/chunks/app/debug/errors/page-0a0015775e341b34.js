(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{2191:function(e,t,s){Promise.resolve().then(s.bind(s,1079))},1079:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(984),r=s(208),a=s(5467),i=s(346);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)({});(0,r.useEffect)(()=>{t((0,a.T1)())},[]);let o=e=>{c(t=>({...t,[e]:!t[e]}))};return(0,n.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"错误日志调试工具"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["收集到 ",e.length," 条错误记录"]})]}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)(i.default,{href:"/debug",className:"px-4 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200",children:"返回调试页"}),(0,n.jsx)("button",{onClick:()=>{(0,a.mt)(),t([])},className:"px-4 py-2 bg-red-100 text-red-800 rounded hover:bg-red-200",children:"清除所有日志"})]})]}),0===e.length?(0,n.jsxs)("div",{className:"p-8 text-center bg-gray-50 rounded-lg border border-gray-200",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"未收集到错误日志"}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"错误信息会在应用运行时自动收集"})]}):(0,n.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"border border-red-200 rounded-lg overflow-hidden bg-white",children:[(0,n.jsxs)("div",{className:"p-4 bg-red-50 cursor-pointer flex justify-between items-center",onClick:()=>o(t),children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-semibold",children:["[",e.componentName,"] ",e.error.message||"未知错误"]}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.timestamp).toLocaleString()," \xb7 ",e.operation]})]}),(0,n.jsx)("span",{className:"text-gray-600",children:s[t]?"⬆️":"⬇️"})]}),s[t]&&(0,n.jsxs)("div",{className:"p-4 border-t border-red-100",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"错误类型"}),(0,n.jsx)("p",{className:"font-mono bg-gray-100 p-2 rounded",children:e.error.name})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"位置"}),(0,n.jsx)("p",{className:"font-mono bg-gray-100 p-2 rounded",children:e.url})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"附加信息"}),(0,n.jsx)("pre",{className:"font-mono bg-gray-100 p-2 rounded overflow-x-auto text-xs",children:JSON.stringify(e.additionalInfo,null,2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 mb-1",children:"调用堆栈"}),(0,n.jsx)("pre",{className:"font-mono bg-gray-100 p-2 rounded overflow-x-auto text-xs whitespace-pre-wrap",children:e.error.stack||"无堆栈信息"})]})]})]},t))})]})}},5467:function(e,t,s){"use strict";s.d(t,{H:function(){return i},KE:function(){return c},NB:function(){return m},PN:function(){return o},T1:function(){return d},eX:function(){return x},iB:function(){return l},mt:function(){return u}});let n=[],r=[],a=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),i=(e,t,s,r)=>{let i="string"==typeof s?s:s.message,c="string"==typeof s?void 0:s.stack,o="string"==typeof s?"CustomError":s.name,l={id:a(),timestamp:new Date().toISOString(),type:o,message:i,component:e,operation:t,severity:"error",details:r,stack:c};return n.unshift(l),n.length>50&&(n=n.slice(0,50)),console.error("[".concat(e,"][").concat(t,"] ").concat(i),r||""),l.id},c=(e,t,s,r)=>{let i={id:a(),timestamp:new Date().toISOString(),type:"Warning",message:s,component:e,operation:t,severity:"warning",details:r};return n.unshift(i),n.length>50&&(n=n.slice(0,50)),console.warn("[".concat(e,"][").concat(t,"] ").concat(s),r||""),i.id},o=(e,t,s,r)=>{let i={id:a(),timestamp:new Date().toISOString(),type:"Info",message:s,component:e,operation:t,severity:"info",details:r};return n.unshift(i),n.length>50&&(n=n.slice(0,50)),console.info("[".concat(e,"][").concat(t,"] ").concat(s),r||""),i.id},l=(e,t,s)=>{let n={id:a(),timestamp:new Date().toISOString(),lastComponent:e,lastAction:t,lastData:s};return r.unshift(n),r.length>20&&(r=r.slice(0,20)),n.id},d=()=>[...n],m=()=>[...r],u=()=>{n=[]},x=()=>{r=[]}}},function(e){e.O(0,[346,115,69,744],function(){return e(e.s=2191)}),_N_E=e.O()}]);