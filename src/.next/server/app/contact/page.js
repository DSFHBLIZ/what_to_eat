(()=>{var e={};e.id=327,e.ids=[327],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},7590:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>u,pages:()=>m,routeModule:()=>x,tree:()=>c});var r=s(7),a=s(8533),n=s(9377),o=s.n(n),i=s(9799),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["contact",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2297)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\contact\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5421)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,3015)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,7832)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\not-found.tsx"]}],m=["D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\contact\\page.tsx"],u="/contact/page",d={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/contact/page",pathname:"/contact",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7384:(e,t,s)=>{Promise.resolve().then(s.bind(s,7253))},7253:(e,t,s)=>{"use strict";let r;s.r(t),s.d(t,{default:()=>i});var a=s(4714),n=s(7580);function o(){let[e,t]=(0,n.useState)({name:"",email:"",subject:"",message:""}),[o,i]=(0,n.useState)({}),[l,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),[d,x]=(0,n.useState)(null),p=()=>{let t={};return e.name.trim()||(t.name="请输入您的姓名"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(t.email="请输入有效的邮箱地址"):t.email="请输入您的邮箱",e.subject.trim()||(t.subject="请输入主题"),e.message.trim()||(t.message="请输入您的消息"),i(t),0===Object.keys(t).length},b=async a=>{if(a.preventDefault(),x(null),p()){c(!0);try{console.log("正在提交用户反馈到user_feedback表...");let{error:a}=await r.from("user_feedback").insert([{name:e.name,email:e.email,subject:e.subject,message:e.message,status:"new",created_at:new Date().toISOString()}]);if(a){if(console.error("提交表单错误:",a),"42P01"===a.code){console.log("表不存在，尝试创建user_feedback表...");let{createUserFeedbackTable:t}=await s.e(30).then(s.bind(s,3030));if(!await t())throw Error("创建反馈表失败");let{error:a}=await r.from("user_feedback").insert([{name:e.name,email:e.email,subject:e.subject,message:e.message,status:"new",created_at:new Date().toISOString()}]);if(a)throw a}else throw a}t({name:"",email:"",subject:"",message:""}),u(!0),setTimeout(()=>{u(!1)},5e3)}catch(e){console.error("提交表单时出错:",e),x("提交失败，请稍后重试")}finally{c(!1)}}},g=s=>{let{name:r,value:a}=s.target;t({...e,[r]:a}),o[r]&&i({...o,[r]:void 0})};return(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 max-w-md mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"联系我们"}),m?a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-6",children:a.jsx("p",{className:"text-green-700",children:"谢谢您的留言！我们会尽快回复您。"})}):(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[d&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-2",children:a.jsx("p",{className:"text-red-700",children:d})}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"姓名"}),a.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:g,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none ${o.name?"border-red-500":"border-gray-300"}`}),o.name&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱"}),a.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:g,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.email})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700 mb-1",children:"主题"}),a.jsx("input",{type:"text",id:"subject",name:"subject",value:e.subject,onChange:g,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none ${o.subject?"border-red-500":"border-gray-300"}`}),o.subject&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.subject})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"留言内容"}),a.jsx("textarea",{id:"message",name:"message",rows:4,value:e.message,onChange:g,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none ${o.message?"border-red-500":"border-gray-300"}`}),o.message&&a.jsx("p",{className:"mt-1 text-sm text-red-500",children:o.message})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md transition duration-300 flex justify-center",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"提交中..."]}):"提交"})})]})]})}function i(){return a.jsx("main",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"联系我们"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"有任何疑问、建议或合作意向？请填写下方表单与我们联系。"})]}),a.jsx("div",{className:"mx-auto",children:a.jsx(o,{})})]})})}s(8384),process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,console.log("静态构建环境检测到，使用模拟的Supabase客户端在ContactForm中"),r={from:()=>({insert:()=>({execute:async()=>({data:null,error:null})})})}},2297:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});let r=(0,s(1481).createProxy)(String.raw`D:\test\Cursor\What_to_eat_Web\src\app\contact\page.tsx`),{__esModule:a,$$typeof:n}=r,o=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[499,843,384,242],()=>s(7590));module.exports=r})();