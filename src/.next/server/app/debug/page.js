(()=>{var e={};e.id=670,e.ids=[670],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8243:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(7),a=t(8533),l=t(9377),i=t.n(l),d=t(9799),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["debug",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7226)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\debug\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5421)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,3015)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,7832)),"D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\not-found.tsx"]}],o=["D:\\test\\Cursor\\What_to_eat_Web\\src\\app\\debug\\page.tsx"],x="/debug/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/debug/page",pathname:"/debug",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2414:(e,s,t)=>{Promise.resolve().then(t.bind(t,257))},257:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(4714),a=t(7580),l=t(9872),i=t(2615),d=t(8384);function n({title:e,children:s,defaultOpen:t=!1}){let[l,i]=(0,a.useState)(t);return(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-6 overflow-hidden",children:[(0,r.jsxs)("button",{className:"w-full px-4 py-3 flex justify-between items-center bg-gray-50 hover:bg-gray-100",onClick:()=>i(!l),children:[r.jsx("h3",{className:"font-semibold text-gray-800",children:e}),r.jsx("svg",{className:`w-5 h-5 transform transition-transform ${l?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&r.jsx("div",{className:"p-4 bg-white",children:s})]})}function c({data:e}){return e?r.jsx("pre",{className:"bg-gray-800 text-gray-200 p-4 rounded-md overflow-x-auto text-sm",children:JSON.stringify(e,null,2)}):r.jsx("p",{className:"text-gray-500",children:"无数据"})}function o(){let[e,s]=(0,a.useState)([]),[t,o]=(0,a.useState)([]),[x,m]=(0,a.useState)({}),[u,p]=(0,a.useState)({}),[h,g]=(0,a.useState)("未检查"),[b,j]=(0,a.useState)(null),[N,y]=(0,a.useState)("errors"),[v,f]=(0,a.useState)({status:"idle",data:null}),[_,w]=(0,a.useState)({status:"idle",data:null});(0,a.useEffect)(()=>{S(),A(),C(),E()},[]);let S=()=>{s((0,i.T1)())},A=()=>{o((0,i.NB)())},C=()=>{m({userAgent:void 0,viewport:{width:window.innerWidth,height:window.innerHeight},memory:"未知",connection:void 0,platform:void 0,language:void 0,cookiesEnabled:void 0,timestamp:new Date().toISOString()})},E=()=>{p({NODE_ENV:"production",NEXT_PUBLIC_SUPABASE_URL:process.env.NEXT_PUBLIC_SUPABASE_URL||"未设置",NEXT_PUBLIC_SUPABASE_ANON_KEY:process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY?"已设置":"未设置"})},P=async()=>{try{g("检查中...");let e=process.env.NEXT_PUBLIC_SUPABASE_URL||"https://ijwimydlumbolmpnmezt.supabase.co",s=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlqd2lteWRsdW1ib2xtcG5tZXp0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI0NjExMDUsImV4cCI6MjA1ODAzNzEwNX0.ynhuFYG6dkoxDgEyDwEnWdZ-DRWx3illLZGyYwn_UnA",t=(0,d.eI)(e,s),r=performance.now(),{data:a,error:l,count:i}=await t.from("CHrecipes").select("id",{count:"exact"}).limit(1),n=performance.now();if(l){g(`错误: ${l.message}`);return}g("连接成功"),j({totalRecords:i,queryTime:`${(n-r).toFixed(2)}ms`,sampleRecord:a&&a.length>0?a[0]:null})}catch(e){g(`错误: ${e.message}`)}},k=async()=>{try{f({status:"loading",data:null,lastChecked:new Date().toISOString()});let e=await fetch("/api/db-status"),s=await e.json();f({status:"success",data:s,lastChecked:new Date().toISOString()})}catch(e){f({status:"error",data:null,error:e.message,lastChecked:new Date().toISOString()})}},I=async()=>{try{w({status:"loading",data:null,lastChecked:new Date().toISOString()});let e=performance.now(),s=await fetch("/api/recipes"),t=performance.now();if(!s.ok){let e=await s.json();throw Error(`API返回错误: ${s.status} - ${e.error||s.statusText}`)}let r=await s.json();w({status:"success",data:{totalRecipes:Array.isArray(r)?r.length:"API未返回数组",sampleData:Array.isArray(r)&&r.length>0?r[0]:null,responseTime:`${(t-e).toFixed(2)}ms`,status:s.status},lastChecked:new Date().toISOString()})}catch(e){w({status:"error",data:null,error:e.message,lastChecked:new Date().toISOString()})}};return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"\uD83D\uDEE0️ 调试仪表盘"}),r.jsx("p",{className:"text-gray-600",children:"系统状态、错误日志和诊断工具"})]}),(0,r.jsxs)("div",{className:"flex mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[r.jsx("button",{className:`px-4 py-2 font-medium rounded-md transition-colors ${"errors"===N?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>y("errors"),children:"错误日志"}),r.jsx("button",{className:`px-4 py-2 font-medium rounded-md transition-colors ${"app-state"===N?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>y("app-state"),children:"应用状态"}),r.jsx("button",{className:`px-4 py-2 font-medium rounded-md transition-colors ${"system"===N?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>y("system"),children:"系统信息"}),r.jsx("button",{className:`px-4 py-2 font-medium rounded-md transition-colors ${"database"===N?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>y("database"),children:"数据库状态"}),r.jsx("button",{className:`px-4 py-2 font-medium rounded-md transition-colors ${"api"===N?"bg-white shadow-sm":"hover:bg-gray-200"}`,onClick:()=>y("api"),children:"API测试"})]}),"errors"===N&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"错误日志"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-red-50 text-red-600 border border-red-200 rounded-md hover:bg-red-100",onClick:()=>{(0,i.mt)(),S()},children:"清除日志"})]}),0===e.length?r.jsx("p",{className:"text-gray-500 py-4",children:"还没有错误日志"}):r.jsx("div",{className:"divide-y",children:e.map(e=>(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[r.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${"error"===e.severity?"bg-red-100 text-red-800":"warning"===e.severity?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:e.severity}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.component}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.operation}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:new Date(e.timestamp).toLocaleString()})]}),r.jsx("p",{className:"font-medium mb-2",children:e.message}),e.details&&r.jsx(n,{title:"详细信息",children:r.jsx(c,{data:e.details})}),e.stack&&r.jsx(n,{title:"堆栈跟踪",children:r.jsx("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:e.stack})})]},e.id))})]}),"app-state"===N&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"应用状态历史"}),r.jsx("button",{className:"px-3 py-1 text-sm bg-red-50 text-red-600 border border-red-200 rounded-md hover:bg-red-100",onClick:()=>{(0,i.eX)(),A()},children:"清除历史"})]}),0===t.length?r.jsx("p",{className:"text-gray-500 py-4",children:"还没有应用状态历史"}):r.jsx("div",{className:"divide-y",children:t.map(e=>(0,r.jsxs)("div",{className:"py-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.lastComponent}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:e.lastAction}),r.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:new Date(e.timestamp).toLocaleString()})]}),e.lastData&&r.jsx(n,{title:"状态数据",children:r.jsx(c,{data:e.lastData})})]},e.id))})]}),"system"===N&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"系统信息"}),r.jsx(n,{title:"浏览器和操作系统",defaultOpen:!0,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"User Agent"}),r.jsx("p",{className:"break-all",children:x.userAgent||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"平台"}),r.jsx("p",{children:x.platform||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"内存"}),r.jsx("p",{children:x.memory||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"语言"}),r.jsx("p",{children:x.language||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"视口大小"}),r.jsx("p",{children:x.viewport?`${x.viewport.width} x ${x.viewport.height}`:"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Cookie启用"}),r.jsx("p",{children:void 0!==x.cookiesEnabled?x.cookiesEnabled?"是":"否":"未知"})]}),x.connection&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"网络类型"}),r.jsx("p",{children:x.connection.effectiveType||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"下载速度"}),r.jsx("p",{children:x.connection.downlink?`${x.connection.downlink} Mbps`:"未知"})]})]})]})}),(0,r.jsxs)(n,{title:"环境变量",defaultOpen:!0,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"NODE_ENV"}),r.jsx("p",{children:u.NODE_ENV||"未知"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"NEXT_PUBLIC_SUPABASE_URL"}),r.jsx("p",{className:"break-all",children:u.NEXT_PUBLIC_SUPABASE_URL||"未设置"})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"NEXT_PUBLIC_SUPABASE_ANON_KEY"}),r.jsx("p",{children:u.NEXT_PUBLIC_SUPABASE_ANON_KEY||"未设置"})]})]}),r.jsx("button",{className:"mt-4 px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",onClick:E,children:"刷新环境变量"})]})]}),"database"===N&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"数据库状态"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(n,{title:"客户端直接连接测试",defaultOpen:!0,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${"连接成功"===h?"bg-green-500":"检查中..."===h?"bg-yellow-500":"bg-red-500"}`}),(0,r.jsxs)("p",{className:"font-medium",children:["状态: ",h]})]}),b&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-500",children:"记录总数:"})," ",b.totalRecords]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-500",children:"查询耗时:"})," ",b.queryTime]}),b.sampleRecord&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"样本记录:"}),r.jsx(c,{data:b.sampleRecord})]})]})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",onClick:P,children:"测试连接"})]}),(0,r.jsxs)(n,{title:"通过API检查数据库状态",defaultOpen:!0,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${"success"===v.status?"bg-green-500":"loading"===v.status?"bg-yellow-500":"error"===v.status?"bg-red-500":"bg-gray-300"}`}),(0,r.jsxs)("p",{className:"font-medium",children:["状态: ","idle"===v.status?"未检查":"loading"===v.status?"检查中...":"success"===v.status?"连接成功":"连接失败"]})]}),v.lastChecked&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["上次检查: ",new Date(v.lastChecked).toLocaleString()]}),v.error&&(0,r.jsxs)("div",{className:"my-3 p-3 bg-red-50 text-red-700 rounded-md",children:[r.jsx("p",{className:"font-medium",children:"错误:"}),r.jsx("p",{children:v.error})]}),v.data&&(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"API响应:"}),r.jsx(c,{data:v.data})]})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",onClick:k,disabled:"loading"===v.status,children:"loading"===v.status?"检查中...":"检查数据库状态"})]})]})]}),"api"===N&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API测试"}),(0,r.jsxs)(n,{title:"菜谱API测试",defaultOpen:!0,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${"success"===_.status?"bg-green-500":"loading"===_.status?"bg-yellow-500":"error"===_.status?"bg-red-500":"bg-gray-300"}`}),(0,r.jsxs)("p",{className:"font-medium",children:["状态: ","idle"===_.status?"未测试":"loading"===_.status?"测试中...":"success"===_.status?"测试成功":"测试失败"]})]}),_.lastChecked&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-3",children:["上次测试: ",new Date(_.lastChecked).toLocaleString()]}),_.error&&(0,r.jsxs)("div",{className:"my-3 p-3 bg-red-50 text-red-700 rounded-md",children:[r.jsx("p",{className:"font-medium",children:"错误:"}),r.jsx("p",{children:_.error})]}),_.data&&(0,r.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"总菜谱数:"}),r.jsx("p",{className:"font-medium",children:_.data.totalRecipes})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"响应时间:"}),r.jsx("p",{className:"font-medium",children:_.data.responseTime})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"HTTP状态:"}),r.jsx("p",{className:"font-medium",children:_.data.status})]})]}),_.data.sampleData&&(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-gray-500 mb-1",children:"样本数据:"}),r.jsx(c,{data:_.data.sampleData})]})]})]}),r.jsx("button",{className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",onClick:I,disabled:"loading"===_.status,children:"loading"===_.status?"测试中...":"测试菜谱API"})]}),(0,r.jsxs)("div",{className:"mt-6",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"所有API端点"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,r.jsxs)("li",{children:[r.jsx(l.default,{href:"/api/recipes",target:"_blank",className:"text-blue-600 hover:underline",children:"/api/recipes"}),r.jsx("span",{className:"text-gray-500 ml-2",children:"- 获取所有菜谱"})]}),(0,r.jsxs)("li",{children:[r.jsx(l.default,{href:"/api/db-status",target:"_blank",className:"text-blue-600 hover:underline",children:"/api/db-status"}),r.jsx("span",{className:"text-gray-500 ml-2",children:"- 检查数据库连接状态"})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-12 pt-6 border-t border-gray-200 text-center text-gray-500 text-sm",children:[r.jsx("p",{children:"系统诊断工具 v1.0.0"}),r.jsx("p",{className:"mt-1",children:r.jsx(l.default,{href:"/",className:"text-blue-500 hover:underline",children:"返回首页"})})]})]})}},7226:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let r=(0,t(1481).createProxy)(String.raw`D:\test\Cursor\What_to_eat_Web\src\app\debug\page.tsx`),{__esModule:a,$$typeof:l}=r,i=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[499,843,384,242],()=>t(8243));module.exports=r})();